# 🏁 F1 戦略シミュレーター MVP 仕様書（v0.1）

## 🎯 目的（Goal）

F1 の 1 レースにおけるピットストップタイミングをユーザーが変更し、それによって**想定される順位変化**をシミュレーションする体験を提供する。

## 📌 対象ユーザー

- F1 視聴歴が 1 年以上ある中〜上級ファン
- 特に戦略・タイヤ・ラップタイムなどに関心があるユーザー

## 💡 機能要件

### ✅ 必須機能

| 機能           | 内容                                                      |
| -------------- | --------------------------------------------------------- |
| レース選択     | MVP では 1 レースのみ（例：2024 年 日本 GP）固定          |
| ピット戦略入力 | 各ドライバーのピットイン周回数を編集可能（最大 2 回想定） |
| タイヤ種選択   | Soft / Medium / Hard を各スティントで指定可能             |
| 順位予測計算   | 入力戦略に応じてラップごとの仮想順位を算出                |
| 可視化         | 折れ線グラフで順位推移を表示（仮想と実際を比較）          |
| リセット       | デフォルト戦略に戻すボタン実装                            |

### ⏩ 将来的に拡張可能な機能（MVP では実装しない）

- 複数レース対応
- SC/VSC 対応
- タイヤ劣化モデル（ラップごとのパフォーマンス低下）
- AI による自動最適戦略提案

## 🧮 シミュレーションロジック（簡易モデル）

1. **実際のラップタイムデータ**をベースに使う
2. ユーザーの入力したピットタイミングで、以下を補正
   - タイヤ種によるラップタイム補正（例：Soft = -0.6 秒, Hard = +0.5 秒）
   - 各ピットロス：例として 20 秒固定
3. 補正後の各ドライバーの全ラップをシミュレート
4. 各ラップでの仮想順位を算出

## 📊 UI/UX 案（ページ構成）

### メイン画面

```
+-----------------------------+
| レース名：2024年 日本GP    |
+-----------------------------+

[戦略入力テーブル（ドライバー × ピット周回 × タイヤ種）]
┌────────────┬────────────┬────────────┐
│ Driver     │ Pit Lap     │ Tire       │
├────────────┼────────────┼────────────┤
│ Verstappen │ 17, 35      │ Soft, Med  │
│ Leclerc    │ 18, 36      │ Soft, Hard │
└────────────┴────────────┴────────────┘

[順位推移グラフ（仮想vs実際）]

[再計算] [リセット]
```

## 🛠 技術構成（MVP 向け）

| パーツ         | 技術                                                |
| -------------- | --------------------------------------------------- |
| バックエンド   | Python + FastAPI（シミュレーションロジック）        |
| データ取得     | CSV / JSON 形式で 2024 年日本 GP のデータを事前取得 |
| フロントエンド | Next.js + Recharts + Tailwind CSS                   |
| ホスティング   | Vercel（フロント）＋ Render（API） or Railway       |
| DB（任意）     | MVP では不要（データは静的読み込み）                |

## 🚦 スケジュール案（ざっくり）

| 期間   | タスク                                          |
| ------ | ----------------------------------------------- |
| Week 1 | レースデータ収集＆整形（CSV 化）                |
| Week 2 | シミュレーションロジック試作（Jupyter でも OK） |
| Week 3 | フロントエンド UI モック作成                    |
| Week 4 | API 接続 → 画面統合 → デプロイ                  |

## 利用する API

https://openf1.org/
https://api.openf1.org/v1/laps?session_key=9161&driver_number=63&lap_number=8
